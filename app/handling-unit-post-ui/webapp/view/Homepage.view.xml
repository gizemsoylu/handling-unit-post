<mvc:View
    controllerName="com.ndbs.handlingunitpostui.controller.Homepage"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
    <Page
        id="Homepage"
        showHeader="false"
    >
        <f:ShellBar
            title="{i18n>homepage}"
            homeIcon="./img/sap_logo.png"
            showSearch="false"
            showNotifications="false"
        />

        <FlexBox
            justifyContent="Center"
            alignItems="Center"
        >
            <VBox
                width="95%"
                class="sapUiSmallMarginTop"
            >
                <smartFilterBar:SmartFilterBar
                    id="sfbHandlingUnit"
                    entitySet="HandlingUnits"
                    useProvidedNavigationProperties="true"
                    enableBasicSearch="false"
                />
                <smartTable:SmartTable
                    id="stHandlingUnit"
                    entitySet="HandlingUnits"
                    smartFilterId="sfbHandlingUnit"
                    tableType="TreeTable"
                    useTablePersonalisation="false"
                    header="{i18n>handlingUnit}"
                    showRowCount="false"
                    enableCopy="false"
                    enableExport="false"
                    enableAutoBinding="true"
                    editTogglable="false"
                    app:useSmartToggle="false"
                    showFullScreenButton="true"
                    requestAtLeastFields="NodeID,HierarchyLevel"
                >
                    <smartTable:customToolbar>
                        <OverflowToolbar design="Transparent">
                            <ToolbarSpacer />
                            <Button
                                text="{i18n>moveHU}"
                                type="Emphasized"
                                icon="sap-icon://journey-depart"
                                press="onMoveHandlingUnit"
                            />
                        </OverflowToolbar>
                    </smartTable:customToolbar>
                    <smartTable:layoutData>
                        <FlexItemData growFactor="1" />
                    </smartTable:layoutData>
                    <table:TreeTable
                        id="uiTreeHandlingUnit"
                        selectionMode="Single"
                        rowSelectionChange="onHUSelectionChange"
                        threshold="20"
                    >
                        <table:rowSettingsTemplate>
                            <table:RowSettings
                                highlight="{path: 'HUStatus', formatter: '.formatter.setStatusHighlight'}"
                            />
                        </table:rowSettingsTemplate>
                        <table:columns>
                            <table:Column width="8rem">
                                <table:customData>
                                    <core:CustomData
                                        key="p13nData"
                                        value='\{"columnKey": "HUStatus", "leadingProperty": "HUStatus", "columnIndex": 1}'
                                    />
                                </table:customData>
                                <Label text="{i18n>status}" />
                                <table:template>
                                    <ObjectStatus
                                        text="{HUStatus}"
                                        state="{
								path: 'HUStatus',
								formatter: '.formatter.setStatusHighlight'
							}"
                                    />
                                </table:template>
                            </table:Column>
                        </table:columns>
                    </table:TreeTable>
                </smartTable:SmartTable>
            </VBox>
        </FlexBox>
    </Page>
</mvc:View>
